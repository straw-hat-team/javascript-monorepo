{{#hasPathParamSchema}}
  export type {{{typePrefix}}}PathParams = {{{pathParamsType}}};
{{/hasPathParamSchema}}

{{#hasQueryParamSchema}}
  export type {{{typePrefix}}}QueryParams = {{{queryParamsType}}};
{{/hasQueryParamSchema}}

{{#hasRequestBody}}
  export type {{{typePrefix}}}BodyParams = {{{bodyParamsType}}};
{{/hasRequestBody}}

export type {{{typePrefix}}}Params = Pick<
  OperationParams<
    {{#hasPathParamSchema}}
      {{{typePrefix}}}PathParams,
    {{/hasPathParamSchema}}
    {{^hasPathParamSchema}}
      never,
    {{/hasPathParamSchema}}

    {{#hasQueryParamSchema}}
      {{{typePrefix}}}QueryParams,
    {{/hasQueryParamSchema}}
    {{^hasQueryParamSchema}}
      never,
    {{/hasQueryParamSchema}}

    {{#hasRequestBody}}
      {{{typePrefix}}}BodyParams
    {{/hasRequestBody}}
    {{^hasRequestBody}}
      never
    {{/hasRequestBody}}
  >,
  {{{requiredParams}}}
>

export type {{{typePrefix}}}Response = {{{responseType}}};

export function {{{functionName}}}UrlPath(params: Omit<{{{typePrefix}}}Params, 'options'>) {
  return createUrlPath<
    {{#hasPathParamSchema}}
      {{{typePrefix}}}PathParams,
    {{/hasPathParamSchema}}
    {{^hasPathParamSchema}}
      never,
    {{/hasPathParamSchema}}

    {{#hasQueryParamSchema}}
      {{{typePrefix}}}QueryParams
    {{/hasQueryParamSchema}}
    {{^hasQueryParamSchema}}
      never
    {{/hasQueryParamSchema}}
  >('{{{operationPath}}}', params);
}

export async function {{{functionName}}}(
  client: Fetcher,
  params: {{{typePrefix}}}Params
): Promise<{{{typePrefix}}}Response> {
  const url = {{{functionName}}}UrlPath(params);

  const response = await client(url, {
    method: '{{{operationMethod}}}',
    {{#hasRequestBody}}
      body: getRequestBody(params.body),
    {{/hasRequestBody}}
    signal: params.options?.signal,
  });

  return getResponseBody(response);
}
